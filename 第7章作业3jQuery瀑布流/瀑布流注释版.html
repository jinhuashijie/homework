<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>

<script src="http://libs.baidu.com/jquery/2.1.4/jquery.min.js"></script>
<title>jQuery笔记</title>
<style>
*{
    margin:0;
    padding:0;
}
p{
    position: absolute;
    margin-left: 10px;
    margin-top: 100px;
    z-index: 99;
}
.box{
    position: relative;
    float: left;/**/

}
.content{
    padding: 10px;
    border:1px solid red;
    box-shadow: 0 0 5px red;
    border-radius: 5px;
}
.content img{
    width:190px;
    height: auto;
}
.img0{
    position: absolute;
   /*margin-left: 100px;
    margin-top: 20px;*/
    z-index: 99;
}
</style>
</head>

<body>
<div id="container">
    <div class="box"><div class="content"><img src="image/bd1.jpg"></div></div>
    <div class="box"><div class="content"><img src="image/bd2.jpg"></div></div>
    <div class="box"><div class="content"><img src="image/bd3.jpg"></div></div>
    <div class="box"><div class="content"><img src="image/bd4.jpg"></div></div>
    <div class="box"><div class="content"><img src="image/bd5.jpg"></div></div>
    <div class="box"><div class="content"><img src="image/bd6.jpg"></div></div>
    <div class="box"><div class="content"><img src="image/bd7.jpg"></div></div>
    <div class="box"><div class="content"><img src="image/bd8.jpg"></div></div>
    <div class="box"><div class="content"><img src="image/bd9.jpg"></div></div>
    <div class="box"><div class="content"><img src="image/bd10.jpg"></div></div>
    <div class="box"><div class="content"><img src="image/bd1.jpg"></div></div>
    <div class="box"><div class="content"><img src="image/bd2.jpg"></div></div>
    <div class="box"><div class="content"><img src="image/bd3.jpg"></div></div>
    <div class="box"><div class="content"><img src="image/bd4.jpg"></div></div>
    <div class="box"><div class="content"><img src="image/bd5.jpg"></div></div>
    <div class="box"><div class="content"><img src="image/bd6.jpg"></div></div>
    <div class="box"><div class="content"><img src="image/bd7.jpg"></div></div>
    <div class="box"><div class="content"><img src="image/bd8.jpg"></div></div>
    <div class="box"><div class="content"><img src="image/bd9.jpg"></div></div>
    <div class="box" id="box00"><div class="content"><img src="image/bd10.jpg"></div></div>
    <div class="box" id="box10"><div class="content"><img src="image/bd10.jpg"></div></div>
</div>
<button id="but">123456</button>
</body>

<script type="text/javascript">
$(document).ready(function(){
//$("p span").last().addClass('highlight');//jQuerylast（）遍历方法；
//首先要监听滚动，这个简单
//然后要不窜出来新的图片，只是几张简单的图片在重复，
//就需要在body内增加元素，添加之后排位的循环次数也要变
var h1 = $(window).width();
var num = parseInt(h1/212);
console.log(num);
 var arrInputValues = new Array(); //这个只能获取到一共有多少元素
  　　  $(".box").each(function(){ 
　　　　     //arrInputValues.push($(this).val());
             //arrInputValues.push($(this).css("height"));//这样是可以生成元素属性数组的
             arrInputValues.push(parseInt($(this).css("height")));//可以转换成数值
    　　     //console.log(arrInputValues);//放里面会循环打印
  　　  }); 
  　　 console.log(arrInputValues.length);// //放外面就打印一次，可以生成数组

var m = new Array();
m[0]=parseInt($(".box").eq(0).css("height"));
m[1]=parseInt($(".box").eq(1).css("height"));
m[2]=parseInt($(".box").eq(2).css("height"));
m[3]=parseInt($(".box").eq(3).css("height"));
m[4]=parseInt($(".box").eq(4).css("height"));
m[5]=parseInt($(".box").eq(5).css("height"));
m.splice(num,m.length);
console.log(m);//这个m是变化的，所以i<m.length是不能用的


for (var i = 0; i < arrInputValues.length; i++) {
    var minheight=Math.min.apply(null, m);//获取最小高度
var newa  =   $(m).index($(Math.min.apply(null, m)));//最小高度的下标
var lihei = parseInt($(".box").eq(i+num).css("height"));//接下来一张图片的高度
var newheight = minheight+lihei;//新的高度
var newleft = $(m).index($(Math.min.apply(null, m)))*212;//新的left值
        $(".box").eq(i+num).css("position","absolute");
        $(".box").eq(i+num).css("z-index","9");
        $(".box").eq(i+num).css("float","");
        $(".box").eq(i+num).css("margin-left",newleft+"px");
        $(".box").eq(i+num).css("margin-top",minheight+0+"px");
        m[$(m).index($(Math.min.apply(null, m)))]+=lihei;
        console.log(m);
}
  $(window).scroll(function(event){
        var a1 = $(document).scrollTop();
        var a2 = $(window).height();
        var h = $(document).height();
        var a = h-a1-a2;
        if (a<2) {
            $(".box").last().after("<div class='box'><div class='content'><img src='image/bd1.jpg'></div></div><div class='box'><div class='content'><img src='image/bd2.jpg'></div></div><div class='box'><div class='content'><img src='image/bd3.jpg'></div></div><div class='box'><div class='content'><img src='image/bd4.jpg'></div></div><div class='box'><div class='content'><img src='image/bd5.jpg'></div></div>");
            var h1 = $(window).width();
var num = parseInt(h1/212);
console.log(num);
 var arrInputValues = new Array(); //这个只能获取到一共有多少元素
  　　  $(".box").each(function(){ 
　　　　     //arrInputValues.push($(this).val());
             //arrInputValues.push($(this).css("height"));//这样是可以生成元素属性数组的
             arrInputValues.push(parseInt($(this).css("height")));//可以转换成数值
    　　     //console.log(arrInputValues);//放里面会循环打印
  　　  }); 
  　　 console.log(arrInputValues.length);// //放外面就打印一次，可以生成数组

var m = new Array();
m[0]=parseInt($(".box").eq(0).css("height"));
m[1]=parseInt($(".box").eq(1).css("height"));
m[2]=parseInt($(".box").eq(2).css("height"));
m[3]=parseInt($(".box").eq(3).css("height"));
m[4]=parseInt($(".box").eq(4).css("height"));
m[5]=parseInt($(".box").eq(5).css("height"));
m.splice(num,m.length);
console.log(m);//这个m是变化的，所以i<m.length是不能用的


for (var i = 0; i < arrInputValues.length; i++) {
    var minheight=Math.min.apply(null, m);//获取最小高度
var newa  =   $(m).index($(Math.min.apply(null, m)));//最小高度的下标
var lihei = parseInt($(".box").eq(i+num).css("height"));//接下来一张图片的高度
var newheight = minheight+lihei;//新的高度
var newleft = $(m).index($(Math.min.apply(null, m)))*212;//新的left值
        $(".box").eq(i+num).css("position","absolute");
        $(".box").eq(i+num).css("z-index","9");
        $(".box").eq(i+num).css("float","");
        $(".box").eq(i+num).css("margin-left",newleft+"px");
        $(".box").eq(i+num).css("margin-top",minheight+0+"px");
        m[$(m).index($(Math.min.apply(null, m)))]+=lihei;
        console.log(m);
}
        }
    });

//$(".box").last().after("<div class='box'><div class='content'><img src='image/bd1.jpg'></div></div><div class='box'><div class='content'><img src='image/bd2.jpg'></div></div><div class='box'><div class='content'><img src='image/bd3.jpg'></div></div><div class='box'><div class='content'><img src='image/bd4.jpg'></div></div><div class='box'><div class='content'><img src='image/bd5.jpg'></div></div>");


    /*双引号的里面只能用单引号*/
//$("#but").click(function(){});
//$("p").append(" <b>Appended text</b>.");
//$("ol").append("<li>Appended item</li>");

//获取到屏幕的宽度
//这个宽度能放几张照片，获取到整数值，
//然后根据这个整数值生成一个几位的数组；
//就根据前面这几张图片的高度生成一个数组；
//后面的都一样了；
/**/
});
</script>

</html>
